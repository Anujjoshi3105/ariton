<h1>Change your password</h1>

<!-- TODO: Check if user has already set custom password, then change this into a change password dialog -->

<form (ngSubmit)="onSubmit()">
    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Enter your old password</mat-label>
        <input matInput [formControl]="passwordInputPrevious" type="password" />
    </mat-form-field>
    <br>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Enter your new password</mat-label>
        <input matInput [formControl]="passwordInput" type="password" />
    </mat-form-field>
    <br>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Repeat your new password</mat-label>
        <input matInput [formControl]="passwordInputRepeat" type="password" />
    </mat-form-field>

    &nbsp;
    <button mat-flat-button type="submit" color="primary" [disabled]="!(passwordInput.valid && !unlocking())">
        @if(unlocking()) {
        <mat-spinner diameter="20"></mat-spinner>
        } @else {
        <span>Save new password</span>
        }
    </button>

    <p>
        @if (invalidPassword()) {
        <mat-error>Password is <strong>invalid</strong></mat-error>
        }
    </p>

</form>