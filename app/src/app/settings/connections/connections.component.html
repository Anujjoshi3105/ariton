<h1>Connections Management</h1>

<mat-card class="notifications-card">
  <mat-card-header>
    <mat-card-title-group>
      <mat-card-title>Requests</mat-card-title>
      <mat-card-subtitle>These are incoming connection requests from other users</mat-card-subtitle>

      <button mat-icon-button [disabled]="connection.loading()" (click)="connection.reloadRequests()">
        @if (connection.loading()) {
        <mat-spinner diameter="24"></mat-spinner>
        } @else {
        <mat-icon>refresh</mat-icon>
        }
      </button>
    </mat-card-title-group>

    <!-- <mat-card-title>Requests</mat-card-title> -->
  </mat-card-header>
  <mat-card-content>
    <p>
      @for(entry of connection.requests(); track entry) {
      <app-request [entry]="entry"></app-request>
      } @empty { No requests found. }
    </p>
  </mat-card-content>
</mat-card>

<br />

<mat-card class="notifications-card">
  <mat-card-header>
    <mat-card-title-group>
      <mat-card-title>Connections</mat-card-title>
      <mat-card-subtitle>These are approved and active connections</mat-card-subtitle>
    </mat-card-title-group>
  </mat-card-header>
  <mat-card-content>
    <p>
      @for(entry of connection.connections(); track entry) {
      <app-connection [entry]="entry"></app-connection>

      } @empty { No connections found. }
    </p>
  </mat-card-content>
</mat-card>

<p>Missing requests? Make sure you have not <a [routerLink]="['..', 'blocks']">blocked</a> the request.</p>
